     1                                 %line 1+1 fileTime.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 %line 1+1 macro.inc
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 LF equ 10
    17                                 TAB equ 9
    18                                 ESC equ 27
    19                                 SPACE equ 32
    20                                 ASTERISK equ 42
    21                                 EOL equ 0
    22                                 VAR_SIZE equ 8
    23                                 MAX_PATH equ 4096
    24                                 false equ 0
    25                                 true equ 1
    26                                 EXIT_SUCCESS equ 0
    27                                 EXIT_FAILURE equ 1
    28                                 ZERO equ 0
    29                                 ONE equ 1
    30                                 
    31                                 [default rel]
    32                                 
    33                                 [extern printf]
    34                                 %line 25+0 macro.inc
    35                                 [extern puts]
    36                                 %line 26+1 macro.inc
    37                                 [extern strcmp]
    38                                 %line 26+0 macro.inc
    39                                 [extern strcat]
    40                                 [extern strlen]
    41                                 %line 27+1 macro.inc
    42                                 [extern strncmp]
    43                                 [extern strncpy]
    44                                 %line 28+0 macro.inc
    45                                 [extern strcpy]
    46                                 %line 29+1 macro.inc
    47                                 [extern strcasecmp]
    48                                 [extern malloc]
    49                                 %line 30+0 macro.inc
    50                                 [extern free]
    51                                 %line 31+1 macro.inc
    52                                 [extern memcpy]
    53                                 %line 31+0 macro.inc
    54                                 [extern memmove]
    55                                 %line 32+1 macro.inc
    56                                 [extern chdir]
    57                                 %line 32+0 macro.inc
    58                                 [extern strncat]
    59                                 [extern getcwd]
    60                                 %line 33+1 macro.inc
    61                                 [extern lstat]
    62                                 %line 33+0 macro.inc
    63                                 [extern getpwnam]
    64                                 %line 34+1 macro.inc
    65                                 [extern opendir]
    66                                 %line 34+0 macro.inc
    67                                 [extern readdir]
    68                                 [extern closedir]
    69                                 %line 35+1 macro.inc
    70                                 [extern getpwuid]
    71                                 %line 35+0 macro.inc
    72                                 [extern getgrgid]
    73                                 %line 36+1 macro.inc
    74                                 [extern readlink]
    75                                 [extern perror]
    76                                 [extern sprintf]
    77                                 %line 38+0 macro.inc
    78                                 [extern localtime]
    79                                 %line 39+1 macro.inc
    80                                 [extern strftime]
    81                                 %line 39+0 macro.inc
    82                                 [extern asctime]
    83                                 %line 40+1 macro.inc
    84                                 
    85                                 
    86                                 %line 45+1 macro.inc
    87                                 
    88                                 %line 51+1 macro.inc
    89                                 
    90                                 %line 56+1 macro.inc
    91                                 
    92                                 %line 61+1 macro.inc
    93                                 
    94                                 %line 66+1 macro.inc
    95                                 
    96                                 
    97                                 
    98                                 
    99                                 
   100                                 
   101                                 %line 76+1 macro.inc
   102                                 
   103                                 %line 81+1 macro.inc
   104                                 
   105                                 %line 85+1 macro.inc
   106                                 
   107                                 %line 89+1 macro.inc
   108                                 
   109                                 %line 93+1 macro.inc
   110                                 
   111                                 %line 98+1 macro.inc
   112                                 
   113                                 %line 102+1 macro.inc
   114                                 
   115                                 %line 107+1 macro.inc
   116                                 
   117                                 %line 112+1 macro.inc
   118                                 
   119                                 %line 116+1 macro.inc
   120                                 
   121                                 %line 121+1 macro.inc
   122                                 
   123                                 %line 125+1 macro.inc
   124                                 
   125                                 %line 130+1 macro.inc
   126                                 
   127                                 %line 136+1 macro.inc
   128                                 
   129                                 %line 141+1 macro.inc
   130                                 
   131                                 %line 147+1 macro.inc
   132                                 
   133                                 %line 153+1 macro.inc
   134                                 
   135                                 %line 158+1 macro.inc
   136                                 
   137                                 %line 163+1 macro.inc
   138                                 
   139                                 %line 168+1 macro.inc
   140                                 
   141                                 %line 174+1 macro.inc
   142                                 
   143                                 %line 181+1 macro.inc
   144                                 
   145                                 %line 185+1 macro.inc
   146                                 
   147                                 %line 190+1 macro.inc
   148                                 
   149                                 %line 195+1 macro.inc
   150                                 
   151                                 %line 202+1 macro.inc
   152                                 
   153                                 %line 206+1 macro.inc
   154                                 
   155                                 %line 214+1 macro.inc
   156                                 
   157                                 %line 218+1 macro.inc
   158                                 
   159                                 %line 224+1 macro.inc
   160                                 
   161                                 %line 230+1 macro.inc
   162                                 
   163                                 %line 234+1 macro.inc
   164                                 
   165                                 %line 241+1 macro.inc
   166                                 
   167                                 %line 245+1 macro.inc
   168                                 
   169                                 %line 250+1 macro.inc
   170                                 
   171                                 %line 257+1 macro.inc
   172                                 
   173                                 %line 264+1 macro.inc
   174                                 
   175                                 %line 268+1 macro.inc
   176                                 
   177                                 %line 274+1 macro.inc
   178                                 
   179                                 %line 279+1 macro.inc
   180                                 
   181                                 %line 284+1 macro.inc
   182                                 
   183                                 %line 288+1 macro.inc
   184                                 
   185                                 %line 293+1 macro.inc
   186                                 
   187                                 %line 298+1 macro.inc
   188                                 
   189                                 %line 303+1 macro.inc
   190                                 
   191                                 %line 307+1 macro.inc
   192                                 
   193                                 %line 312+1 macro.inc
   194                                 
   195                                 %line 317+1 macro.inc
   196                                 
   197                                 %line 324+1 macro.inc
   198                                 
   199                                 %line 334+1 macro.inc
   200                                 
   201                                 %line 338+1 macro.inc
   202                                 
   203                                 %line 343+1 macro.inc
   204                                 
   205                                 %line 349+1 macro.inc
   206                                 
   207                                 %line 353+1 macro.inc
   208                                 
   209                                 %line 357+1 macro.inc
   210                                 
   211                                 %line 362+1 macro.inc
   212                                 
   213                                 %line 366+1 macro.inc
   214                                 
   215                                 %line 371+1 macro.inc
   216                                 
   217                                 %line 376+1 macro.inc
   218                                 
   219                                 %line 381+1 macro.inc
   220                                 
   221                                 %line 386+1 macro.inc
   222                                 
   223                                 %line 391+1 macro.inc
   224                                 
   225                                 %line 395+1 macro.inc
   226                                 
   227                                 %line 400+1 macro.inc
   228                                 
   229                                 %line 404+1 macro.inc
   230                                 
   231                                 %line 411+1 macro.inc
   232                                 
   233                                 %line 415+1 macro.inc
   234                                 
   235                                 %line 420+1 macro.inc
   236                                 
   237                                 %line 424+1 macro.inc
   238                                 
   239                                 %line 433+1 macro.inc
   240                                 
   241                                 
   242                                 %line 8+1 fileTime.asm
   243                                 
   244                                 
   245                                 
   246                                 
   247                                 %line 13+1 fileTime.asm
   248                                 
   249                                 [global main]
   250                                 [global printFileTime]
   251                                 
   252                                 [extern mtime]
   253                                 
   254                                 
   255                                 [section .text]
   256                                 
   257                                 printFileTime:
   258 00000000 55                      push rbp
   259                                 %line 23+0 fileTime.asm
   260 00000001 4889E5                  mov rbp, rsp
   261 00000004 4883E4F0                and rsp, -16
   262                                 %line 24+1 fileTime.asm
   263                                 
   264                                 
   265 00000008 8D3D(F4FFFFFF)          lea edi, [mtime]
   266 0000000E E8(F6FFFFFF)            call localtime
   267 00000013 488905(F2FFFFFF)        mov [tm], rax
   268                                 
   269 0000001A 488D3D(F2FFFFFF)        lea rdi, [buffer]
   270 00000021 48C7C628000000          mov rsi, 40
   271 00000028 488D15(F2FFFFFF)        lea rdx, [tdFmt]
   272 0000002F 488B0D(F2FFFFFF)        mov rcx, [tm]
   273 00000036 E8(F6FFFFFF)            call strftime
   274                                 
   275 0000003B 488D3D(F2FFFFFF)        lea rdi, [buffer]
   276 00000042 31C0                    xor eax, eax
   277                                 %line 37+0 fileTime.asm
   278 00000044 E8(F6FFFFFF)            call printf
   279                                 %line 38+1 fileTime.asm
   280                                 
   281 00000049 C9                      leave
   282                                 %line 39+0 fileTime.asm
   283 0000004A C3                      ret
   284                                 %line 40+1 fileTime.asm
   285                                 
   286                                 
   287                                 
   288                                 %line 54+1 fileTime.asm
   289                                 
   290                                 
   291                                 [section .bss]
   292                                 
   293                                 [absolute 0]
   294                                 %line 58+0 fileTime.asm
   295                                 tm_type:
   296                                 %line 59+1 fileTime.asm
   297                                  tm_sec resd 1
   298                                  tm_min resd 1
   299                                  tm_hour resd 1
   300                                  tm_mday resd 1
   301                                  tm_mon resd 1
   302                                  tm_year resd 1
   303                                  tm_wday resd 1
   304                                  tm_yday resd 1
   305                                  tm_isdst resd 1
   306                                 tm_type_size EQU $ - tm_type
   307                                 %line 68+0 fileTime.asm
   308                                 [section .bss]
   309                                 %line 69+1 fileTime.asm
   310                                 
   311 00000000 <gap>                  buffer resb 40
   312                                 
   313                                 [section .data]
   314                                 
   315 00000000 25622025642025483A-    tdFmt db "%b %d %H:%M ", EOL
   316 00000000 254D2000           
   317                                 
   318                                 tm :
   319                                 %line 76+0 fileTime.asm
   320                                 ..@32.strucstart:
   321                                 %line 77+1 fileTime.asm
   322 0000000D 00<rept>               times tm_type_size-($-..@32.strucstart) db 0
   323                                 
   324                                 
